function calcular(){var e=getValue("sueldoBruto"),t=getValue("alquiler"),a=getValue("hipotecario"),A=document.getElementById("hijos"),E=A.options[A.selectedIndex].value,O=isSelected("conyuge"),n=isSelected("jubilado"),u=isSelected("patagonico"),l=getAnnualAmount(t)*PORCENTAJE_ALQUILER;l>TOPE_ALQUILER&&(l=TOPE_ALQUILER);var o=getAnnualAmount(a);o>TOPE_HIPOTECARIO&&(o=TOPE_HIPOTECARIO);var c=e-getAportes(e,+n),S=c,r=getAnnualAmount(c)+S,i=MINIMO_NO_IMPONIBLE+ADICIONAL_4TA_CATEGORIA;+u&&(i*=PORCENTAJE_PATAGONICO);var T=i+CONYUGE*O+HIJO*E+l+o;+n&&(T=TOPE_JUBILADO+l+o);var I=0;T<r&&(I=r-T);var P=calcularImpuesto(I),_=P.value.toFixed(2);$("#impuestoAnual").text("$"+_);var C=(_/12).toFixed(2);$("#impuestoMensual").text("$"+C);var L=C/e*100;$("#alicuota").text(L.toFixed(2)+"%");var d=0==L?0:100*PORCENTAJES_ESCALES[P.escala];$("#alicuotaMarginal").text(d.toFixed(2)+"%");var R=c-C;$("#sueldoEnMano").text("$"+Math.round(R)+".00")}function calcularImpuesto(e){for(var t=0,a={},A=0;e>TOPES_ESCALAS[t];){var E=0==t?TOPES_ESCALAS[t]:TOPES_ESCALAS[t]-TOPES_ESCALAS[t-1];A+=E*PORCENTAJES_ESCALES[t],t++}return E=0==t?e:e-TOPES_ESCALAS[t-1],A+=E*PORCENTAJES_ESCALES[t],a.value=A,a.escala=t,a}function getAportes(e,t){var a=(t?APORTES_JUBILADOS:APORTES_NO_JUBILADOS)*e;return a>TOPE_APORTES&&(a=TOPE_APORTES),a}function isSelected(e){return $("input[name='"+e+"']:checked").val()}function getValue(e){return $("#"+e).val()}function getAnnualAmount(e){return 12*e}var TOPES_ESCALAS=[25800,51600,77400,103200,154800,206400,309600,412800,99999999],PORCENTAJES_ESCALES=[.05,.09,.12,.15,.19,.23,.27,.31,.35],MINIMO_NO_IMPONIBLE=66917.91,ADICIONAL_4TA_CATEGORIA=321205.968,CONYUGE=62385.2,HIJO=31461.09,TOPE_APORTES=13926.16,TOPE_JUBILADO=407592,TOPE_ALQUILER=51967,TOPE_HIPOTECARIO=2e4,PORCENTAJE_ALQUILER=.4,PORCENTAJE_PATAGONICO=1.22,APORTES_JUBILADOS=.06,APORTES_NO_JUBILADOS=.17;$(document).ready(function(){$("#calcular").on("click",function(){calcular()}),$(document).keypress(function(e){13==e.keyCode&&(e.preventDefault(),calcular())}),$("input[name='jubilado']").click(function(){$("input[name='conyuge']").attr({disabled:1==$(this).val()}),$("input[name='patagonico']").attr({disabled:1==$(this).val()})})}),a;